{% extends "base.html" %}

{% block title %}Create New Post{% endblock title %}

{% block content %}
<div class="flex flex-col items-center">
  <h1 class="text-4xl text-black font-bold pt-20 mb-8">Create New Post for {{ user.full_name }}</h1>
  
  <form action="/users/{{ user.id }}/posts/new" method="POST" class="w-full max-w-lg">
    
    <div class="mb-4">
      <label for="title" class="block text-gray-700 text-sm font-bold mb-2">Title</label>
      <input 
        type="text" 
        name="title" 
        id="title" 
        class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" 
        required 
      >
    </div>
    
    <div class="mb-4">
      <label for="content" class="block text-gray-700 text-sm font-bold mb-2">Content</label>
      <textarea 
        name="content" 
        id="content" 
        rows="5" 
        class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" 
        required
      ></textarea>
    </div>
    
    <!-- Tag selection dropdown -->
    <div class="mb-4">
      <label for="tags" class="block text-gray-700 text-sm font-bold mb-2">Select Existing Tags</label>
      <select 
        name="tags" 
        id="tags" 
        class="shadow border rounded w-full py-2 px-3 text-gray-700 focus:outline-none focus:shadow-outline" 
        multiple
      >
        {% for tag in tags %}
          <option value="{{ tag.id }}">{{ tag.name }}</option>
        {% endfor %}
      </select>
      <p class="text-xs text-gray-500 mt-2">Hold down the Ctrl (Windows) or Command (Mac) key to select multiple tags.</p>
    </div>

    <!-- New tag input field -->
    <div class="mb-4">
      <label for="new_tags" class="block text-gray-700 text-sm font-bold mb-2">Create New Tags (Comma Separated)</label>
      <input 
        type="text" 
        name="new_tags" 
        id="new_tags" 
        class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" 
        placeholder="Enter tags separated by commas (e.g., 'python, flask, web')"
      >
    </div>

    <!-- Submit and Cancel buttons -->
    <div class="flex items-center">
      <button 
        type="submit" 
        class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"
      >
        Create Post
      </button>
      <a href="/user/{{ user.id }}" class="ml-4 text-blue-500 hover:underline">Cancel</a>
    </div>
    
  </form>
</div>
{% endblock content %}
